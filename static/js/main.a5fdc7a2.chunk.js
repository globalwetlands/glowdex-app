(this["webpackJsonpglowdex-app"]=this["webpackJsonpglowdex-app"]||[]).push([[0],{24:function(e,t,a){e.exports={spinner:"Spinner_spinner__1QSjx",rotator:"Spinner_rotator__ldWJL",path:"Spinner_path__B6xE1",dash:"Spinner_dash__3VCIb",colors:"Spinner_colors__3EM4d",pathSmall:"Spinner_pathSmall__1zioJ",dashSmall:"Spinner_dashSmall__2ti9Z"}},25:function(e,t,a){e.exports={main:"App_main__3cTDB",ReactSplitGutterHorizontal:"App_ReactSplitGutterHorizontal__15IR8",ReactSplitDraggerHorizontal:"App_ReactSplitDraggerHorizontal__2flWb"}},47:function(e){e.exports=JSON.parse('[{"dimension":"Habitat Extent Change","indicator":"mang_loss_rate","habitat":"mg","label":"Loss rate","direction":-1,"description":"Instantaneous rate of mangrove extent loss.","":""},{"dimension":"Habitat Extent Change","indicator":"seag_loss_rate","habitat":"sg","label":"Loss rate","direction":1,"description":"Instantaneous rate of seagrass extent change.","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_fish_dens","habitat":"mg","label":"Fish density","direction":1,"description":"Mean mangrove fish density (year of young/year).","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_invert_dens","habitat":"mg","label":"Invertebrate density","direction":1,"description":"Mean mangrove invertebrate density (year of young/year).","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_spec_score","habitat":"mg","label":"Spp threat score","direction":1,"description":"IUCN threatened species score for mangrove-affiliated flora and fauna (higher score = fewer threatened species).","":""},{"dimension":"Ecological Structure and Function","indicator":"salt_spec_score","habitat":"sm","label":"Spp threat score","direction":1,"description":"IUCN threatened species score for saltmarsh-affiliated flora and fauna (higher score = fewer threatened species).","":""},{"dimension":"Ecological Structure and Function","indicator":"seag_spec_score","habitat":"sg","label":"Spp threat score","direction":1,"description":"IUCN threatened species score for seagrass-affiliated flora and fauna (higher score = fewer threatened species).","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_frag_area_mn_rate","habitat":"mg","label":"Fragment rate (area)","direction":1,"description":"Instantaneous rate of change in mean patch area.","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_frag_enn_mn_rate","habitat":"mg","label":"Fragment rate (distance)","direction":-1,"description":"","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_frag_area_mn","habitat":"mg","label":"Fragment (area)","direction":1,"description":"Mean patch area.","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_frag_enn_mn","habitat":"mg","label":"Fragment (distance)","direction":-1,"description":"","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_mean_age","habitat":"mg","label":"Mean age","direction":1,"description":"Mean mangrove persistence (years).","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_mean_agb_mg_ha","habitat":"mg","label":"AGB per ha","direction":1,"description":"Mean mangrove above ground biomass (mg/ha).","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_mean_SOC","habitat":"mg","label":"SOC per ha","direction":1,"description":"Mean mangrove soil organic carbon.","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_mean_height_m","habitat":"mg","label":"Tree height","direction":1,"description":"Mean mangrove canopy height (m).","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_seagrass_climate_current","habitat":"sg","label":"Climate impact","direction":-1,"description":"The current (2013) cumulative climate pressures calculated as the sum of Ocean acidification, Sea surface temperature and Sea level rise pressures (with seagrass ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_seagrass_land_current","habitat":"sg","label":"Land impact","direction":-1,"description":"The current (2013) cumulative land pressure calculated as the sum of Organic chemical pollution, Direct human and Nutrient polution pressures (with seagrass ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_seagrass_marine_current","habitat":"sg","label":"Marine impact","direction":-1,"description":"The current (2013) cumulative marine pressure calculated as the sum of Artisinal fishing, Comercial fishing Pelagic bycatch (low, high), Commercial fishing Demersal non-destructive bycatch (low, high), Commercial fishing Demersal destructive, Light and Shipping  pressures (with seagrass ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_seagrass_climate_rate","habitat":"sg","label":"Climate impact rate","direction":-1,"description":"The instantenous rate of change in cumulative climate pressures from 2003 - 2013 calculated as the sum of Ocean acidification, Sea surface temperature and Sea level rise pressures (with seagrass ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_seagrass_land_rate","habitat":"sg","label":"Land impact rate","direction":-1,"description":"The instantaneous rate of change of cumulative land pressures from 2003 - 2013 calculated as the sum of Organic chemical pollution, Direct human and Nutrient polution pressures (with seagrass ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_seagrass_marine_rate","habitat":"sg","label":"Marine impact rate","direction":-1,"description":"The instantaneous rate of change of cumulative marine pressures from 2003 - 2013 calculated as the sum of Artisinal fishing, Comercial fishing Pelagic bycatch (low, high), Commercial fishing Demersal non-destructive bycatch (low, high), Commercial fishing Demersal destructive, Light and Shipping  pressures (with seagrass ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_mangrove_climate_current","habitat":"mg","label":"Climate impact","direction":-1,"description":"The current (2013) cumulative climate pressures calculated as the sum of Ocean acidification, Sea surface temperature and Sea level rise pressures (with mangrove ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_mangrove_land_current","habitat":"mg","label":"Land impact","direction":-1,"description":"The current (2013) cumulative land pressure calculated as the sum of Organic chemical pollution, Direct human and Nutrient polution pressures (with mangrove ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_mangrove_marine_current","habitat":"mg","label":"Marine impact","direction":-1,"description":"The current (2013) cumulative marine pressure calculated as the sum of Artisinal fishing, Comercial fishing Pelagic bycatch (low, high), Commercial fishing Demersal non-destructive bycatch (low, high), Commercial fishing Demersal destructive, Light and Shipping  pressures (with mangrove ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_mangrove_climate_rate","habitat":"mg","label":"Climate impact rate","direction":-1,"description":"The instantenous rate of change in cumulative climate pressures from 2003 - 2013 calculated as the sum of Ocean acidification, Sea surface temperature and Sea level rise pressures (with mangrove ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_mangrove_land_rate","habitat":"mg","label":"Land impact rate","direction":-1,"description":"The instantaneous rate of change of cumulative land pressures from 2003 - 2013 calculated as the sum of Organic chemical pollution, Direct human and Nutrient polution pressures (with mangrove ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_mangrove_marine_rate","habitat":"mg","label":"Marine impact rate","direction":-1,"description":"The instantaneous rate of change of cumulative marine pressures from 2003 - 2013 calculated as the sum of Artisinal fishing, Comercial fishing Pelagic bycatch (low, high), Commercial fishing Demersal non-destructive bycatch (low, high), Commercial fishing Demersal destructive, Light and Shipping  pressures (with mangrove ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_saltmarsh_climate_current","habitat":"sm","label":"Climate impact","direction":-1,"description":"The current (2013) cumulative climate pressures calculated as the sum of Ocean acidification, Sea surface temperature and Sea level rise pressures (with saltmarsh ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_saltmarsh_land_current","habitat":"sm","label":"Land impact","direction":-1,"description":"The current (2013) cumulative land pressure calculated as the sum of Organic chemical pollution, Direct human and Nutrient polution pressures (with saltmarsh ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_saltmarsh_marine_current","habitat":"sm","label":"Marine impact","direction":-1,"description":"The current (2013) cumulative marine pressure calculated as the sum of Artisinal fishing, Comercial fishing Pelagic bycatch (low, high), Commercial fishing Demersal non-destructive bycatch (low, high), Commercial fishing Demersal destructive, Light and Shipping  pressures (with saltmarsh ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_saltmarsh_climate_rate","habitat":"sm","label":"Climate impact rate","direction":-1,"description":"The instantenous rate of change in cumulative climate pressures from 2003 - 2013 calculated as the sum of Ocean acidification, Sea surface temperature and Sea level rise pressures (with saltmarsh ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_saltmarsh_land_rate","habitat":"sm","label":"Land impact rate","direction":-1,"description":"The instantaneous rate of change of cumulative land pressures from 2003 - 2013 calculated as the sum of Organic chemical pollution, Direct human and Nutrient polution pressures (with saltmarsh ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Cumulative Impacts","indicator":"pressure_saltmarsh_marine_rate","habitat":"sm","label":"Marine impact rate","direction":-1,"description":"The instantaneous rate of change of cumulative marine pressures from 2003 - 2013 calculated as the sum of Artisinal fishing, Comercial fishing Pelagic bycatch (low, high), Commercial fishing Demersal non-destructive bycatch (low, high), Commercial fishing Demersal destructive, Light and Shipping  pressures (with saltmarsh ecosystem multiplier) from Halpern et al. 2019.","":""},{"dimension":"Ecological Structure and Function","indicator":"mang_spec_prop","habitat":"mg","label":"Prop threatened","direction":-1,"description":"Proportion of IUCN threatened species for mangrove-affiliated flora and fauna.","":""},{"dimension":"Ecological Structure and Function","indicator":"salt_spec_prop","habitat":"sm","label":"Prop threatened","direction":-1,"description":"Proportion of IUCN threatened species for saltmarsh-affiliated flora and fauna.","":""},{"dimension":"Ecological Structure and Function","indicator":"seag_spec_prop","habitat":"sg","label":"Prop threatened","direction":-1,"description":"Proportion of IUCN threatened species for seagrass-affiliated flora and fauna.","":""}]')},48:function(e,t,a){e.exports={SliderInput:"SliderInput_SliderInput__2uRuk"}},56:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);a(54),a(55),a(56);var i=a(0),s=a.n(i),n=a(17),r=a.n(n),l=a(4),c=a(39),o=a(28),d=a.n(o),u=(a(69),a(13)),m=a(21),p=a(24),g=a.n(p),h=a(2);function b({isSmall:e=!1,...t}){const a=e?25:66;return Object(h.jsx)("svg",{className:g.a.spinner,"data-testid":"spinner",width:a,height:a,viewBox:`0 0 ${a} ${a}`,xmlns:"http://www.w3.org/2000/svg",...t,children:Object(h.jsx)("circle",{className:e?g.a.pathSmall:g.a.path,fill:"none",strokeWidth:a/10,strokeLinecap:"round",cx:a/2,cy:a/2,r:a/2-3})})}var f=a(7),j=a.n(f),v=a(18);const O=[5,18],x={showMenuHelpText:!0,selectedGridItems:[],numberOfClusters:5,typologyBoxPlotQuantile:.8,enabledHabitats:["mg","sm","sg"]},y=Object(v.b)({name:"globalSettings",initialState:x,reducers:{hideMenuHelpText:e=>{e.showMenuHelpText=!1},setSelectedGridItems:(e,t)=>{e.selectedGridItems=t.payload},setNumberOfClusters:(e,t)=>{const a=t.payload;O.includes(a)&&(e.numberOfClusters=a)},setTypologyBoxPlotQuantile:(e,t)=>{e.typologyBoxPlotQuantile=t.payload},toggleEnabledHabitat:(e,t)=>{const a=t.payload;x.enabledHabitats.includes(a)&&(e.enabledHabitats=j.a.xor(e.enabledHabitats,[a]))}}}),{hideMenuHelpText:_,setNumberOfClusters:I,setTypologyBoxPlotQuantile:C,toggleEnabledHabitat:N,setSelectedGridItems:S}=y.actions;var w=y.reducer,M=a(45),k=a.n(M);function D({minLng:e,minLat:t,maxLng:a,maxLat:i}){return{latitude:(t+i)/2,longitude:(e+a)/2}}function H({latitude:e,longitude:t}){return k()(e,t).format("FFf",{decimalPlaces:1})}const L={id:"gridItems",type:"fill",paint:{"fill-opacity":1,"fill-outline-color":["get","color"],"fill-color":["get","fillColor"]}},F={id:"gridItemsHighlighted",type:"fill",paint:{"fill-opacity":1,"fill-outline-color":["get","color"],"fill-color":["get","color"]}},T={id:"gridItemsSelected",type:"fill",paint:{"fill-opacity":1,"fill-outline-color":["get","color"],"fill-color":["get","color"]}};function P({mapFeatures:e,gridItems:t,clusters:a,isLoading:s}){const n=Object(i.useRef)(),r=Object(l.b)(),c=Object(l.c)((e=>e.globalSettings.selectedGridItems)),[o,d]=Object(i.useState)({latitude:20,longitude:0,zoom:2,minZoom:2}),[p,g]=Object(i.useState)({}),f=Object(i.useCallback)((async(e,t=250)=>{if(!e)return;const[a,i,s,n]=Object(m.a)(e),{longitude:r,latitude:l}=D({minLng:a,minLat:i,maxLng:s,maxLat:n}),c={...o,longitude:r,latitude:l,zoom:5,transitionDuration:t,transitionInterpolator:new u.a};d(c),await async function(e){return new Promise((t=>setTimeout(t,e)))}(t+50)}),[o]),j=Object(i.useMemo)((()=>{var e,t;return["==","ID",(null===p||void 0===p||null===(e=p.feature)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.ID)||!1]}),[p]),v=Object(i.useMemo)((()=>["in",["get","ID"],["literal",c]]),[c]);return Object(h.jsxs)("div",{className:"Map","data-testid":"Map",children:[Object(h.jsxs)(u.b,{...o,width:"100%",height:"100%",mapStyle:"mapbox://styles/ejinks-gu/ckhycntp61ol31am7qum156sk?optimize=true",onViewportChange:d,mapboxApiAccessToken:"pk.eyJ1IjoiZWppbmtzLWd1IiwiYSI6ImNrcXVmenRvejA0Njkyb21uNW1ydm51dzgifQ.rZHjw6Z03fu05pAvsJHWGQ",onHover:e=>{const{features:t,srcEvent:{offsetX:a,offsetY:i}}=e,s=t&&t.find((e=>e.layer.id===L.id));g({feature:s,x:a,y:i})},onMouseOut:()=>{g({})},onClick:async e=>{const{features:t}=e,a=t&&t.find((e=>e.layer.id===L.id));if(a){const{ID:e}=a.properties;await f(a),r(S([e]))}},ref:n,getCursor:e=>e.isHovering?"pointer":(null===e||void 0===e?void 0:e.isDragging)?"grabbing":(null===p||void 0===p?void 0:p.feature)?"crosshair":"grab",children:[Object(h.jsx)(u.d,{className:"Map--NavigationControl",onViewportChange:d}),!s&&Object(h.jsxs)(u.e,{type:"geojson",data:{type:"FeatureCollection",features:e},children:[Object(h.jsx)(u.c,{...L}),Object(h.jsx)(u.c,{...F,filter:j}),Object(h.jsx)(u.c,{...T,filter:v})]}),(()=>{var e,i;const{feature:s,x:n,y:r}=p;if(!s)return null;const l=null===(e=s.properties)||void 0===e?void 0:e.ID,c=null===(i=s.properties)||void 0===i?void 0:i.clusterNumber,o=t.find((e=>parseInt(e.ID)===l)),d=a.find((({n:e})=>e===c));return s&&Object(h.jsxs)("div",{className:"Map--Tooltip",style:{left:n,top:r},children:[Object(h.jsx)("div",{className:"control",children:Object(h.jsxs)("div",{className:"tags has-addons",children:[Object(h.jsx)("span",{className:"tag",children:"ID"}),Object(h.jsx)("span",{className:"tag has-text-weight-bold",children:null===o||void 0===o?void 0:o.ID})]})}),Object(h.jsx)("div",{className:"control",children:Object(h.jsxs)("div",{className:"tags has-addons",children:[Object(h.jsx)("span",{className:"tag",children:"Country"}),Object(h.jsx)("span",{className:"tag has-text-weight-bold",children:null===o||void 0===o?void 0:o.TERRITORY1})]})}),Object(h.jsx)("div",{className:"control",children:Object(h.jsxs)("div",{className:"tags has-addons",children:[Object(h.jsx)("span",{className:"tag",children:"Typology"}),Object(h.jsx)("span",{className:"tag",style:{backgroundColor:d.fillColor,border:`1px solid ${d.color}`,fontWeight:600},children:c})]})})]})})()]}),s&&Object(h.jsx)(b,{style:{position:"absolute",top:"calc(50% - 33px)",left:"calc(50% - 33px)"}})]})}a(71);var B=a(20),E=a(30),z=a.n(E);function W({color:e,alpha:t}){return z()(e).alpha(t).css()}var A=a(46),R=a.n(A),G=a(47);const Q=(...e)=>fetch(...e).then((e=>e.json())),$=(...e)=>fetch(...e).then((e=>e.text())).then((e=>async function({csvString:e}){const{data:t}=R.a.parse(e,{header:!0,dynamicTyping:!0});return t}({csvString:e})));const V=j.a.chain(G).map((function(e){let t="",a="";switch(e.habitat){case"mg":t="Mangrove",a="hsla(0, 66%, 63%, 1)";break;case"sg":t="Seagrass",a="hsla(83, 53%, 59%, 1)";break;case"sm":t="Saltmarsh",a="hsla(161, 53%, 58%, 1)";break;default:t=""}return{...e,habitatLabel:t,habitatColor:a}})).sortBy(["habitat","indicator"]).keyBy("indicator").value(),q=Object.keys(V);function J({mapFeatures:e,clusterItems:t,clusters:a,enabledHabitats:i}){return e.reduce((function(e,s){const n=null===t||void 0===t?void 0:t[s.properties.ID];if(!function(e){const t={mg:"mang_presence",sm:"salt_presence",sg:"seag_presence"};return j.a.some(i,(a=>1===e[t[a]]))}(n))return e;const r=a.find((({n:e})=>e===(null===n||void 0===n?void 0:n.cluster))),{color:l,fillColor:c,n:o}=r;return e.push({...s,properties:{...s.properties,clusterNumber:o,color:l,fillColor:c,value:o}}),e}),[])}function U(){const e=Object(l.c)((e=>e.globalSettings.numberOfClusters)),t=Object(l.c)((e=>e.globalSettings.enabledHabitats)),{data:a}=Object(B.a)("/data/grid.geojson",Q),{data:s}=Object(B.a)("/data/all-clusters.csv",$),{data:n}=Object(B.a)("/data/grid-items.csv",$),{data:r}=Object(B.a)("/data/grid-items-residuals.csv",$),c=Object(i.useMemo)((()=>n&&r?n.map((e=>{const t=r.find((({ID:t})=>t===e.ID));return{...e,residuals:t}})):[]),[n,r]),o=Object(i.useMemo)((()=>!a||!s),[s,a]),d=Object(i.useMemo)((()=>{if(null===s||void 0===s?void 0:s.length){return function({numberOfClusters:e,allClusters:t}){O.includes(e)||(e=O[0]);const a=`cluster_${e}`,i=`hex_${e}`,s=null===t||void 0===t?void 0:t.map((e=>({ID:parseInt(e.ID,10),cluster:parseInt(null===e||void 0===e?void 0:e[a],10),color:null===e||void 0===e?void 0:e[i],mang_presence:e.mang_presence,salt_presence:e.salt_presence,seag_presence:e.seag_presence}))).filter((e=>!j.a.isNaN(e.cluster)));return j.a.keyBy(s,"ID")}({numberOfClusters:e,allClusters:s})}}),[s,e]),u=Object(i.useMemo)((()=>function({clusterItems:e}){const t=e?Object.values(e):[];return j.a.chain(t).uniqBy("cluster").sortBy("cluster").value().map((({cluster:e,color:t})=>({n:e,color:t,fillColor:W({color:t,alpha:.3})})))}({clusterItems:d})),[d]),m=Object(i.useMemo)((()=>{if(!(null===a||void 0===a?void 0:a.features)||j.a.isEmpty(d)||j.a.isEmpty(u))return[];return J({clusterItems:d,clusters:u,mapFeatures:null===a||void 0===a?void 0:a.features,enabledHabitats:t})}),[d,u,null===a||void 0===a?void 0:a.features,t]),p=Object(i.useMemo)((()=>function({clusters:e}){const t=e.map((e=>e.color)),a=e.map((e=>e.fillColor)),i=e.map((e=>e.n));return{id:"gridItems",type:"fill",paint:{"fill-opacity":1,"fill-outline-color":["to-color",["at",["index-of",["get","clusterNumber"],["literal",i]],["literal",t]]],"fill-color":["to-color",["at",["index-of",["get","clusterNumber"],["literal",i]],["literal",a]]]}}}({clusters:u})),[u]),g=Object(i.useMemo)((()=>{if(c&&d){return j.a.groupBy(c,(({ID:e})=>{var t;return null===d||void 0===d||null===(t=d[parseInt(e)])||void 0===t?void 0:t.cluster}))}}),[d,c]);return{mapFeatures:m,allClusters:s,clusters:u,clusterItems:d,gridItems:c,isLoading:o,gridLayerStyle:p,gridItemsPerCluster:g}}a(72);var Z=a(94),Y=a(52),X=a(48),K=a.n(X);function ee({value:e,onChange:t,debounceMs:a=0,...s}){const[n,r]=Object(i.useState)(e);return Object(Z.a)((()=>{t(n)}),a,[n]),Object(h.jsx)(Y.a,{className:K.a.SliderInput,value:n,onChange:e=>r(e),...s})}var te=a(92),ae=a(49),ie=a.n(ae),se=a(50),ne=a.n(se),re=a(93);const le=ne()(ie.a),ce={displayModeBar:!1},oe={plot_bgcolor:"transparent",paper_bgcolor:"transparent",showlegend:!1,legend:{x:0,y:2},hovermode:!1,margin:{l:200,r:0,t:15,b:15},xaxis:{showticklabels:"true",zeroline:!0,range:[-4,4.1],mirror:"ticks",tickmode:"linear"},yaxis:{showticklabels:!0,tickfont:{size:11}},boxgap:.1};function de(e){var t,a,i;return`${null===(t=V[e])||void 0===t?void 0:t.habitatLabel} ${null===(a=V[e])||void 0===a||null===(i=a.label)||void 0===i?void 0:i.toLowerCase()}`}const ue={size:7,symbol:"diamond",color:"#ffaaff",line:{color:"#cc00ff",width:1}};function me({width:e,significantIndicatorColumns:t,gridItems:a,gridItem:i}){const s=Object(l.c)((e=>e.globalSettings.enabledHabitats)),n={mg:1===i.mang_presence,sm:1===i.salt_presence,sg:1===i.seag_presence},r=t.filter((({colName:e})=>{const t=function(e){var t;return null===(t=V[e])||void 0===t?void 0:t.habitat}(e);return s.includes(t)&&n[t]})),c=(o=r,j.a.groupBy(o,(({colName:e})=>{const t=V[e];return null===t||void 0===t?void 0:t.dimension})));var o;return{groupedPlots:j.a.chain(c).map(((t,s)=>{const n=t.reverse().map((({colName:e})=>{const t=function(e){var t;return null===(t=V[e])||void 0===t?void 0:t.habitatColor}(e);return{type:"violin",x:a.map((t=>t.residuals[e])),name:de(e),showlegend:!1,marker:{color:t,size:3},line:{width:1}}})),r=t.map((({colName:e})=>{const t=de(e),a=`Cell ${t}`,s=[t];return{x:[i.residuals[e]],y:s,name:a,showlegend:!1,marker:ue}})),l={x:[null],y:[null],name:"Selected Cell",marker:ue},c=40*t.length+25;return{data:[...n,...r,l],layout:{...oe,width:e,height:c},dimension:s}})).sortBy("dimension").value()}}function pe({gridItems:e,gridItem:t,quantileValue:a=.8}){const[i,{width:s}]=Object(re.a)(),{significantIndicatorColumns:n}=function({quantileValue:e,gridItems:t,columns:a=q}){const i=t.map((e=>e.residuals)),s=a.map((t=>{const a=e=>e[t],s=Object(te.a)(i,.5+e/2,a),n=Object(te.a)(i,.5-e/2,a);return Math.sign(n)===Math.sign(s)?Math.sign(s):0}));return{significantIndicatorColumns:a.map(((e,t)=>({colName:e,significanceFactor:s[t]}))).filter((({significanceFactor:e})=>0!==e))}}({quantileValue:a,gridItems:e}),{groupedPlots:r}=me({significantIndicatorColumns:n,width:s,gridItems:e,gridItem:t});return Object(h.jsxs)("div",{ref:i,style:{width:"100%"},children:[!r.length&&Object(h.jsx)("div",{className:"notification is-warning is-light",children:"No indicators of significance"}),!!r.length&&r.map((({data:e,layout:t,dimension:a},i)=>Object(h.jsxs)("div",{className:"block",children:[Object(h.jsx)("h6",{className:"title is-6 mb-0 is-underlined",children:a}),Object(h.jsx)(le,{data:e,layout:t,config:ce})]},`groupedPlot${a}`)))]})}function ge({selectedGridItemData:e,gridItems:t,clusters:a,gridItemsPerCluster:i}){const s=Object(l.c)((e=>e.globalSettings.typologyBoxPlotQuantile)),n=null===e||void 0===e?void 0:e[0],{TERRITORY1:r,ID:c,clusterNumber:o,color:d,fillColor:u,centerCoords:m}=n,p=a.find((({n:e})=>e===o));return Object(h.jsx)("div",{className:"Widgets--Box--Inner",children:Object(h.jsxs)("div",{className:"content",children:[Object(h.jsx)("h3",{children:r}),Object(h.jsx)("h6",{className:"tag",children:H(m)}),Object(h.jsxs)("div",{className:"field is-grouped is-grouped-multiline",children:[Object(h.jsx)("div",{className:"control",children:Object(h.jsxs)("div",{className:"tags has-addons",children:[Object(h.jsx)("span",{className:"tag",children:"ID"}),Object(h.jsx)("span",{className:"tag is-light has-text-weight-bold",children:c})]})}),Object(h.jsx)("div",{className:"control",children:Object(h.jsxs)("div",{className:"tags has-addons",children:[Object(h.jsx)("span",{className:"tag",children:"Typology"}),Object(h.jsx)("span",{className:"tag",style:{backgroundColor:u,border:`1px solid ${d}`,fontWeight:600},children:o})]})})]}),Object(h.jsx)("div",{className:"block",children:Object(h.jsx)(he,{})}),Object(h.jsx)(pe,{cluster:p,gridItems:i[o],gridItem:n,quantileValue:s})]})})}function he(){const e=Object(l.b)(),t=Object(l.c)((e=>e.globalSettings.typologyBoxPlotQuantile));return Object(h.jsxs)("fieldset",{className:"field",style:{maxWidth:300},children:[Object(h.jsxs)("label",{className:"label",style:{marginBottom:18},children:["Quantile for Typology Boxplot:"," ",Object(h.jsx)("span",{className:"tag",children:t})]}),Object(h.jsx)("div",{className:"control",children:Object(h.jsx)(ee,{min:0,max:.99,step:.05,value:t,onChange:t=>{e(C(t))},"aria-label":"Number of Clusters"})})]})}a(73);function be({clusters:e}){const t=Object(l.b)(),a=Object(l.c)((e=>e.globalSettings.numberOfClusters)),i=Object(l.c)((e=>e.globalSettings.enabledHabitats));function s({title:e,name:a}){return Object(h.jsx)("div",{className:"control",children:Object(h.jsxs)("label",{className:"checkbox",children:[Object(h.jsx)("input",{type:"checkbox",name:a,onChange:function(e){const a=e.target.name;t(N(a))},checked:i.includes(a)}),e]})})}return Object(h.jsxs)("div",{className:"MapLegend",children:[Object(h.jsxs)("fieldset",{className:"field",style:{maxWidth:330},children:[Object(h.jsx)("label",{className:"label",children:"Number of Typologies"}),Object(h.jsxs)("div",{className:"control",children:[Object(h.jsxs)("label",{className:"radio",children:[Object(h.jsx)("input",{type:"radio",name:"number_typologies",checked:5===a,"aria-label":"Number of typologies: 5",onChange:()=>{t(I(5))}}),"5"]}),Object(h.jsxs)("label",{className:"radio",children:[Object(h.jsx)("input",{type:"radio",name:"number_typologies",checked:18===a,"aria-label":"Number of typologies: 18",onChange:()=>{t(I(18))}}),"18"]})]})]}),Object(h.jsx)("div",{className:"MapLegend--Display block",children:e.map((e=>Object(h.jsx)("div",{className:"MapLegend--ColourStop",children:Object(h.jsx)("div",{className:"MapLegend--ColourBox",style:{borderColor:e.color,backgroundColor:e.fillColor},children:Object(h.jsx)("span",{className:"MapLegend--Value",children:e.n})})},`ColourStop-${e.n}`)))}),Object(h.jsxs)("fieldset",{className:"field",children:[Object(h.jsx)("label",{className:"label",children:"Habitats"}),Object(h.jsx)(s,{title:"Mangroves",name:"mg"}),Object(h.jsx)(s,{title:"Saltmarsh",name:"sm"}),Object(h.jsx)(s,{title:"Seagrass",name:"sg"})]})]})}a(74);function fe({Icon:e,onClick:t,...a}){return Object(h.jsx)(e,{role:"button",onClick:t,onKeyDown:e=>{"Space"!==e.code&&"Enter"!==e.code||t(e)},tabIndex:0,"aria-pressed":"false",...a})}a(75);var je=a(91),ve=a(31),Oe=a.n(ve);function xe({title:e,modalIsOpen:t,setModalIsOpen:a,children:i}){function s(){a(!1)}return Object(h.jsxs)(Oe.a,{isOpen:t,onAfterOpen:function(){},onRequestClose:s,className:"Popup--Modal",overlayClassName:"Popup--Overlay",children:[Object(h.jsxs)("div",{className:"Popup--Modal--Inner",children:[e&&Object(h.jsx)("h3",{className:"Popup--Title",children:e}),Object(h.jsx)("div",{className:"Popup--Content",children:i})]}),Object(h.jsx)(fe,{Icon:je.a,className:"Popup--CloseButton",onClick:s})]})}Oe.a.setAppElement("body");var ye=a.p+"static/media/fig1.f2937d0d.png";const _e=()=>Object(h.jsx)("div",{children:Object(h.jsxs)("figure",{style:{width:"100%",maxWidth:550},children:[Object(h.jsx)("img",{src:ye,alt:"Figure 1",width:1488,height:1334}),Object(h.jsx)("figcaption",{children:"Figure 1: Flow diagram of the nine key methodological steps used to map and diagnose spatially explicit typologies of coastal wetland ecosystem condition applicable at a global scale."})]})}),Ie=e=>Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[Object(h.jsx)("circle",{cx:"12",cy:"12",r:"11.5"}),Object(h.jsx)("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),Object(h.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]});function Ce(){const[e,t]=Object(i.useState)(!1);return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsxs)("div",{className:"Menu--MenuButtonWrap","data-hashelptext":!0,children:[Object(h.jsx)(fe,{Icon:Ie,onClick:()=>{t(!0)},className:"Menu--MenuButton",title:"Open Menu",tabIndex:1}),Object(h.jsx)("div",{className:"Menu--HelpText",children:"Click on a grid cell to get started"})]}),Object(h.jsx)(xe,{title:"Glowdex App",modalIsOpen:e,setModalIsOpen:t,children:Object(h.jsx)(_e,{})})]})}function Ne({children:e,onClose:t,...a}){return Object(h.jsx)("div",{className:"Widgets--Box",...a,children:e})}function Se({mapFeatures:e,gridItems:t,clusters:a,isLoading:s,gridItemsPerCluster:n}){const{selectedGridItemData:r}=function({gridItems:e,mapFeatures:t}){const a=Object(l.c)((e=>e.globalSettings.selectedGridItems));return{selectedGridItemData:Object(i.useMemo)((()=>{const i=t.map((e=>e.properties.ID));return(null===a||void 0===a?void 0:a.length)&&(null===e||void 0===e?void 0:e.length)?a.filter((e=>i.includes(e))).map((a=>{const i=e.find((({ID:e})=>a===parseInt(e))),s=t.find((e=>e.properties.ID===a)),[n,r,l,c]=Object(m.a)(s),o=D({minLng:n,minLat:r,maxLng:l,maxLat:c});return{...i,...(null===s||void 0===s?void 0:s.properties)||{},centerCoords:o}})):[]}),[a,e,t])}}({mapFeatures:e,gridItems:t});return Object(h.jsxs)("div",{className:"Widgets--Wrap",children:[Object(h.jsx)(Ce,{}),!s&&Object(h.jsx)(Ne,{children:Object(h.jsx)(be,{clusters:a})}),!!(null===r||void 0===r?void 0:r.length)&&Object(h.jsx)(Ne,{children:Object(h.jsx)(ge,{selectedGridItemData:r,clusters:a,gridItemsPerCluster:n,gridItems:t})})]})}var we=a(25),Me=a.n(we);const ke=[40,60];function De(){const{mapFeatures:e,gridItems:t,clusters:a,gridItemsPerCluster:i,isLoading:s}=U();return Object(h.jsx)("main",{className:Me.a.main,children:Object(h.jsxs)(d.a,{direction:o.SplitDirection.Horizontal,initialSizes:ke,minWidth:300,gutterClassName:Me.a.ReactSplitGutterHorizontal,draggerClassName:Me.a.ReactSplitDraggerHorizontal,children:[Object(h.jsx)(Se,{mapFeatures:e,gridItems:t,clusters:a,isLoading:s,gridItemsPerCluster:i}),Object(h.jsx)(P,{mapFeatures:e,gridItems:t,clusters:a,isLoading:s})]})})}var He=a(12),Le=a(51),Fe=a.n(Le),Te=a(8);const Pe=Object(Te.b)({globalSettings:(({key:e,reducer:t,config:a={}})=>{const i={key:e,storage:Fe.a,...a};return Object(He.g)(i,t)})({reducer:w,key:"globalSettings",whitelist:["numberOfClusters","typologyBoxPlotQuantile","enabledHabitats"]})}),Be=Object(v.a)({reducer:Pe,middleware:Object(v.c)({serializableCheck:{ignoredActions:[He.a,He.f,He.b,He.c,He.d,He.e]}})}),Ee=Object(He.h)(Be);r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(l.a,{store:Be,children:Object(h.jsx)(c.a,{loading:null,persistor:Ee,children:Object(h.jsx)(De,{})})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.a5fdc7a2.chunk.js.map